use clap::Parser;

/// This is a parser for the `.dat` files generated by WoT client after a battle when you view battle results.
#[derive(Parser, Debug)]
#[clap(author, version, about, long_about = None)]
struct Args {
    /// Absolute file path of the .dat file.
    /// You can find this usually (or a similar variation) at `C:\Users\$USER_NAME\AppData\Roaming\Wargaming.net\WorldOfTanks\battle_results\$BASE_32_ENCODED_NAME\your_file.dat`
    #[clap(short, long)]
    file: String,
}
fn main() {
    let args = Args::parse();

    // let paths = std::fs::read_dir("datfile_parser/examples/other").unwrap();

    // for path in paths {
    //     if path.as_ref().unwrap().metadata().unwrap().is_file() {
    //         let file = std::fs::read(path.unwrap().path()).expect("unable to read the file");

    //         let parser = wot_datfile_parser::DatFileParser::new();
    //         let result = parser.parse(&file).unwrap().to_csv_compatible();

    //         let s = serde_json::to_string_pretty(&result).unwrap();

    //         println!("{}", s);
    //     }
    // }
    // std::fs::write("result.json", s);
}
